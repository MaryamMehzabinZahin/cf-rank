(this["webpackJsonpcf-rank"]=this["webpackJsonpcf-rank"]||[]).push([[0],{52:function(t,e,n){},53:function(t,e,n){},55:function(t,e,n){},57:function(t,e,n){},64:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var s=n(0),r=n.n(s),a=n(26),c=n.n(a),i=(n(52),n(53),n(8)),o=n(12),l=n(13),h=n(15),u=n(14),d=n(10),j=n.n(d),p=n(18),b=n(71),f=n(69),O=(n(55),n(1));function x(t){var e=t.data,n=t.rowid;return null==e?Object(O.jsx)("tr",{children:Object(O.jsx)("td",{children:"called with null"})}):Object(O.jsxs)("tr",{className:"rank-font",children:[Object(O.jsx)("td",{style:{"text-align":"left"},children:Object(O.jsx)("span",{className:"hash-rank",children:n})}),Object(O.jsx)("td",{style:{"text-align":"center"},children:e.rank}),Object(O.jsx)("td",{style:{"text-align":"left"},children:e.party.members.map((function(t){return t.handle+" "}))}),Object(O.jsx)("td",{children:e.points}),Object(O.jsx)("td",{}),e.problemResults.map((function(t){return Object(O.jsxs)("td",{children:[Object(O.jsxs)("span",{className:"cell-points",children:[t.points>0&&t.points,"  ",Object(O.jsx)("span",{className:"cell-rejected",children:t.rejectedAttemptCount>0&&-t.rejectedAttemptCount})]}),Object(O.jsx)("span",{className:"cell-time",children:t.bestSubmissionTimeSeconds&&new Date(1e3*t.bestSubmissionTimeSeconds).toISOString().substr(11,8)})]})}))]})}var m=n(23),v=n(73),g=n(42),y=n(70),k=n(72),I=n(74),C=n(22);n(57);function N(t,e){for(var n=t.substring(1).split("&"),s=0;s<n.length;s++){var r=n[s].split("=");if(decodeURIComponent(r[0])==e)return decodeURIComponent(r[1])}return""}function w(t){var e=N(t.location.search,"handles");return e.length>0&&";"!=e.slice(-1)&&(e+=";"),{url:N(t.location.search,"url"),contestID:t.match.params.contestID,handles:e}}function R(t,e){var n=w(t),s=w(e);return null!==n&&null!==s&&n.url===s.url&&n.contestID===s.contestID&&n.handles===s.handles}function D(t,e,n,s){var r=t;return r.length>0&&"/"!=r.slice(-1)&&(r+="/"),e||(e=1541),r=r+e+"?",""!==n&&(r=r+"url="+n+"&"),""!==s&&(r=r+"handles="+s+"&"),r.length>0&&"&"===r.slice(-1)&&(r=r.slice(0,-1)),r}function S(t){var e=t.url,n=t.contestID,r=t.handles,a=Object(s.useState)(e),c=Object(m.a)(a,2),i=c[0],o=c[1],l=Object(s.useState)(n),h=Object(m.a)(l,2),u=h[0],d=h[1],j=Object(s.useState)(r),p=Object(m.a)(j,2),b=p[0],x=p[1];console.log("Nav-props",t);var N=Object(O.jsx)("div",{className:"input-url",children:Object(O.jsx)(v.a,{children:Object(O.jsx)(f.a,{variant:"dark",size:"sm",responsive:"sm",children:Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsxs)("th",{colSpan:"2",children:[Object(O.jsx)(v.a.Label,{htmlFor:"inlineFormInput",srOnly:!0,children:"Handles"}),Object(O.jsx)(g.a,{size:"sm",className:"mb-0 org-field",id:"inlineFormInput",placeholder:"handles seperated by ;",defaultValue:r,onChange:function(t){return x(t.target.value)}})]}),Object(O.jsxs)("th",{colSpan:"2",children:[Object(O.jsx)(v.a.Label,{htmlFor:"inlineFormInput",srOnly:!0,children:"URL"}),Object(O.jsx)(g.a,{size:"sm",className:"mb-0 org-field",id:"inlineFormInput",placeholder:"city/organization cf url",defaultValue:e,onChange:function(t){return o(t.target.value)}})]}),Object(O.jsxs)("th",{xs:"auto",children:[Object(O.jsx)(v.a.Label,{htmlFor:"inlineFormInput2",srOnly:!0,children:"ContestID"}),Object(O.jsx)(g.a,{size:"sm",className:"mb-0 contestID-field",id:"inlineFormInput2",placeholder:"ContestID",value:u,onChange:function(t){d(t.target.value)}})]}),Object(O.jsx)("th",{xs:"auto",children:Object(O.jsx)(C.b,{to:D("/contest/",u,i,b),children:Object(O.jsx)(y.a,{type:"submit",className:"mb-0 btn-light",size:"sm",children:"Load"})})})]})})})},e+n)});return Object(O.jsx)("div",{children:Object(O.jsxs)(k.a,{bg:"dark",variant:"dark",className:"navbar-expand-sm",children:[Object(O.jsxs)(I.a,{className:"mr-auto",children:[Object(O.jsx)(I.a.Link,{href:D("#selector/contests/",u,i,b),active:t.location.pathname.startsWith("/selector/contests"),children:"Contests"}),Object(O.jsx)(I.a.Link,{disabled:!0,active:t.location.pathname.startsWith("/contest"),children:"Ranklist"})]}),N]})})}var F=n(46),L=n(47),A="https://be-beam.swiftshopbd.com/";function M(t){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(j.a.mark((function t(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(A+e,{"X-Requested-With":"cf"}).then((function(t){return t.text()})).then((function(t){var e,n=(new DOMParser).parseFromString(t,"text/html").querySelector("#pageContent > div.datatable.ratingsDatatable").innerHTML,s=Object(L.a)(n.matchAll('/profile/(.+?)"')),r="",a=Object(F.a)(s);try{for(a.s();!(e=a.n()).done;){var c=e.value;r=r.concat(c[1]+";")}}catch(i){a.e(i)}finally{a.f()}return r})).catch((function(t){return console.log("Failed to fetch page: ",t),""})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(41),n(64);var U=n.p+"static/media/logo.6ce24c58.svg",E="FINISHED",z=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t))._isMounted=!1,s.state={data:null,loading:!0,needRetry:!0,failed:!1,handles:s.props.handles,renderCount:0},s}return Object(l.a)(n,[{key:"actionFetchRanks",value:function(){var t=Object(p.a)(j.a.mark((function t(e){var n,s,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,s="https://codeforces.com/api"+("/contest.standings?contestId="+this.props.contestID+"&handles=")+e,console.log("Fetching",s),t.next=5,fetch(s).catch((function(t){console.log(t),n=!0}));case 5:if(r=t.sent,!n){t.next=8;break}return t.abrupt("return");case 8:if(200!==r.status){t.next=15;break}return t.next=11,r.json();case 11:this.state.data=t.sent.result,this.state.data.contest.phase==E?this.state.needRetry=!1:this.state.needRetry=!0,t.next=16;break;case 15:this.state.needRetry=!1;case 16:this.state.loading=!1,this._isMounted&&this.setState({renderCount:this.state.renderCount+1});case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){if(null==this.state.data)return 0==this.state.loading?Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"stopped",children:[Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("p",{children:"Not Available! "})]})}):Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"loading",children:[Object(O.jsx)(b.a,{style:{width:"100px",height:"100px"},animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(O.jsx)("p",{children:"Constructing Ranklist..."})]})});var t=this.state.data;return Object(O.jsxs)("div",{children:[t.contest.phase===E&&Object(O.jsx)("img",{src:U,className:"App-logo",alt:"logo"}),t.contest.phase!==E&&Object(O.jsx)("img",{src:U,className:"App-logo-animate",alt:"logo"}),Object(O.jsx)("div",{className:"con-tittle",children:t.contest.name}),Object(O.jsx)("div",{className:"ranklist",children:Object(O.jsxs)(f.a,{variant:"dark",size:"sm",responsive:"sm",striped:!0,bordered:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{style:{"text-align":"left"},children:Object(O.jsx)("span",{className:"hash-rank",children:"#"})}),Object(O.jsx)("th",{style:{"text-align":"center"},children:"Rank"}),Object(O.jsx)("th",{style:{"text-align":"left"},children:"Handle"}),Object(O.jsx)("th",{children:"Points"}),Object(O.jsx)("th",{style:{"text-align":"left"},children:" "}),t.problems.map((function(t){return Object(O.jsx)("th",{children:t.index})}))]})}),Object(O.jsx)("tbody",{children:t.rows.map((function(t,e){return Object(O.jsx)(x,{rowid:e+1,data:t},e)}))})]})})]})}},{key:"parseHandles",value:function(){var t=Object(p.a)(j.a.mark((function t(){var e=this;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.state.loading=!0,t.abrupt("return",M(this.props.url).then((function(t){console.log("parsed-users",t),e.setState({handles:e.props.handles+t})})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setRefreshIfNecessary",value:function(){var t=Object(p.a)(j.a.mark((function t(){var e=this;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return""!==this.state.handles&&this.actionFetchRanks(this.state.handles),t.next=3,this.parseHandles();case 3:this.state.needRetry&&(""!==this.props.url&&(this.parseHandlesInterval=setInterval((function(){e.parseHandles()}),6e4)),this.parseRankInterval=setInterval((function(){e.actionFetchRanks(e.state.handles)}),3e4));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setRefreshIfNecessary().then(),this._isMounted=!0}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),this._isMounted=!1}},{key:"shouldComponentUpdate",value:function(t,e){return e.renderCount!=this.state.renderCount||e.handles!=this.state.handles&&(this.actionFetchRanks(e.handles),!1)}}]),n}(r.a.Component),H=(n(65),function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"layout-header",children:Object(O.jsx)(S,Object(i.a)({},this.props),this.props.contestID+this.props.url)}),Object(O.jsx)("div",{className:"App-Container",children:this.props.children}),Object(O.jsx)("div",{className:"footer"})]})}}]),n}(r.a.Component)),W=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(t,e){return!R(t,this.props)}},{key:"render",value:function(){console.log("rank-layout-rendering",this.props);var t=w(this.props),e=t.url,n=t.contestID,s=t.handles;return Object(O.jsx)("div",{children:Object(O.jsx)(H,Object(i.a)(Object(i.a)(Object(i.a)({},this.props),w(this.props)),{},{children:Object(O.jsx)(z,Object(i.a)(Object(i.a)({},this.props),w(this.props)),"rank-list"+e+n+s)}),"rank-list-layout")})}}]),n}(r.a.Component),P=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){return Object(o.a)(this,n),e.call(this,t)}return Object(l.a)(n,[{key:"render",value:function(){if(console.log("rendering-row",this.props),null==this.props.data)return Object(O.jsx)("tr",{children:Object(O.jsx)("td",{children:"called with null"})});var t=this.props.data;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{textalign:"left",children:t.name}),Object(O.jsx)("td",{textalign:"left",children:t.id}),Object(O.jsx)("td",{children:Object(O.jsx)(C.b,{to:D("/selector/contests/",t.id,this.props.url,this.props.handles),children:Object(O.jsx)("p",{ref:this.props.innerRef,children:this.props.selected?"SELECTED":"select"})})})]})}},{key:"shouldComponentUpdate",value:function(t,e){return null===t||null===this.props||t.selected!==this.props.selected}}]),n}(r.a.Component),B=r.a.forwardRef((function(t,e){return Object(O.jsx)(P,Object(i.a)({innerRef:e},t))})),_=(n(66),function(t){return"/contest.list?gym="+t});function V(t){var e=t.searchStr,n=t.children;return r.a.Children.toArray(n).filter((function(t){return!e||""==e||t.props.data.name.toLowerCase().includes(e.toLowerCase())}))}var q=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).selectRef=[],s.refID={},s.state={data:null,loading:!0,needRetry:!0,failed:!1,searchStr:""},s}return Object(l.a)(n,[{key:"actionFetchContests",value:function(){var t=Object(p.a)(j.a.mark((function t(e){var n,s,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,s="https://codeforces.com/api"+_(e),console.log("Fetching Contests",s),t.next=5,fetch(s).catch((function(t){console.log(t),n=!0}));case 5:if(r=t.sent,!n){t.next=8;break}return t.abrupt("return");case 8:if(200!==r.status){t.next=14;break}return t.next=11,r.json();case 11:this.state.data=t.sent.result,t.next=14;break;case 14:this.state.loading=!1,this.forceUpdate();case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;if(null===this.state.data)return!1===this.state.loading?Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"stopped",children:Object(O.jsx)("p",{children:"Not Available! "})})}):Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:"loading",children:[Object(O.jsx)(b.a,{style:{width:"100px",height:"100px"},animation:"border",role:"status",children:Object(O.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(O.jsx)("p",{children:"Parsing Contests..."})]})});var e=this.state.data;return Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"contests",children:Object(O.jsxs)(f.a,{variant:"dark",size:"sm",responsive:"sm",striped:"true",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Contest Tittle"}),Object(O.jsx)("th",{children:"ID"}),Object(O.jsx)("th",{children:Object(O.jsx)(g.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",textalign:"right",placeholder:"Filter by Tittle",defaultValue:this.state.searchStr,onMouseMove:function(e){if(t.state.searchStr!=e.target.value)return t.setState({searchStr:e.target.value})}})})]})}),Object(O.jsx)("tbody",{children:Object(O.jsx)(V,{searchStr:this.state.searchStr,children:e.map((function(e,n){if("BEFORE"!==e.phase)return e.id in t.refID||(t.selectRef.push(r.a.createRef()),t.refID[e.id]=t.selectRef.length-1),Object(O.jsx)(B,{ref:t.selectRef[t.refID[e.id]],data:e,url:t.props.url,handles:t.props.handles,selected:e.id==t.props.contestID},n)}))},"search-str"+this.state.searchStr)})]},"contests-table")},"contests-div")},"contests-list-div")}},{key:"repeatedWork",value:function(){var t=Object(p.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.state.loading=!0,t.abrupt("return",this.actionFetchContests(!1).then((function(t){console.log("contests-data",t)})).catch((function(t){return alert(t)})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setRefreshIfNecessary",value:function(){var t=Object(p.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.repeatedWork();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.setRefreshIfNecessary().then()}},{key:"componentWillUnmount",value:function(){}},{key:"shouldComponentUpdate",value:function(t,e){if(null!=t&&(t.url!=this.props.url||t.contestID!=this.props.contestID)){try{this.selectRef[this.refID[Number(t.contestID)]].current.innerText="SELECTED",this.selectRef[this.refID[Number(this.props.contestID)]].current.innerText="select"}catch(n){}return!1}return!(!e||e.searchStr==this.state.searchStr)}}]),n}(r.a.Component),J=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(t,e){return!R(t,this.props)}},{key:"render",value:function(){return console.log("con-layout-rendering",this.props),Object(O.jsx)("div",{children:Object(O.jsx)(H,Object(i.a)(Object(i.a)(Object(i.a)({},this.props),w(this.props)),{},{children:Object(O.jsx)(q,Object(i.a)(Object(i.a)({},this.props),w(this.props)),"con-list")}),"con-list-layout")})}}]),n}(r.a.Component),X=n(6);function G(){return Object(O.jsx)(C.a,{children:Object(O.jsx)("div",{className:"Switch-Route-Block",children:Object(O.jsxs)(X.d,{children:[Object(O.jsx)(X.b,{path:"/selector/contests/:contestID",render:function(t){return Object(O.jsx)(J,Object(i.a)({},t),"contest-list-layout")}},"route-contest-list"),Object(O.jsx)(X.b,{path:"/contest/:contestID",render:function(t){return Object(O.jsx)(W,Object(i.a)({},t),"single-rank-instance")}},"route-rank-list"),Object(O.jsx)(X.a,{from:"/",to:"/contest/1541?url=https://codeforces.com/ratings/organization/3403",component:J})]},"switch-route-sw")},"switch-route-block")},"hash-router")}var K=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("header",{className:"App-header",children:Object(O.jsx)(G,{},"app-conatiner")})})},Q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(e){var n=e.getCLS,s=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),s(t),r(t),a(t),c(t)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(K,{})}),document.getElementById("root")),Q()}},[[67,1,2]]]);
//# sourceMappingURL=main.e5564493.chunk.js.map